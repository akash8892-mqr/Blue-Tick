<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fake Profile Detector</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">
  <h2>Fake Profile Detector</h2>
  <input id="profileUrl" placeholder="Paste Instagram/LinkedIn URL...">
  <button onclick="analyze()">Analyze</button>

  <div class="loader"></div>

  <div class="probBox">
    Probability Fake:
    <div class="probBar"><div class="probFill"></div></div>
    <div class="resultTag"></div>
  </div>
</div>

<script>
async function analyze() {
  const url = document.getElementById("profileUrl").value;
  if (!url.trim()) return alert("Enter a profile link!");

  document.querySelector(".loader").style.display = "block";
  document.querySelector(".probBox").style.display = "none";
  document.querySelector(".probFill").style.width = "0%";

  try {
    const response = await fetch("/predict", {
      method:"POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({url})
    });

    const data = await response.json();
    const prob = Math.round((data.prob_fake || 0) * 100);

    document.querySelector(".loader").style.display = "none";
    document.querySelector(".probBox").style.display = "block";
    document.querySelector(".probFill").style.width = prob + "%";

    const tag = document.querySelector(".resultTag");
    tag.textContent = prob > 60 ? "Likely FAKE ❌" : "Likely REAL ✅";
    tag.style.color = prob > 60 ? "#ff6b9c" : "#7dffa2";
  } catch {
    alert("Error contacting server");
  }
}
</script>
</body>
</html>
